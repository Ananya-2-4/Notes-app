<!DOCTYPE html>
<html>
<head>
  <title>Cute Notes App ðŸ’Œ</title>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js"></script>
  <style>
    body {
      font-family: 'Comic Sans MS', cursive;
      background-color: #fff0f6;
      padding: 2rem;
      color: #444;
    }
    input, button {
      padding: 0.6rem;
      margin: 0.4rem 0;
      font-size: 1rem;
      border-radius: 10px;
      border: none;
    }
    button {
      background-color: #ffb6c1;
      cursor: pointer;
    }
    #messages {
      margin-top: 2rem;
      background: #ffe6ec;
      padding: 1rem;
      border-radius: 10px;
    }
    .note {
      background: white;
      padding: 0.7rem;
      margin: 0.5rem 0;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
  </style>
</head>
<body>

  <h2>ðŸ’– Cute Notes & Reminders</h2>

  <div id="loginSection">
    <label>Your name:</label><br>
    <input type="text" id="myName" placeholder="e.g. Sender"><br>
    <label>Send notes to:</label><br>
    <input type="text" id="theirName" placeholder="e.g. Reciever"><br>
    <button onclick="startApp()">Send emðŸ’¬</button>
  </div>

  <div id="chatSection" style="display: none;">
    <p>Hi <span id="displayMyName"></span>! Send cute notes to <span id="displayTheirName"></span> âœ¨</p>
    <input type="text" id="reminderText" placeholder="Type your note...">
    <button onclick="sendNote()">Send ðŸ’Œ</button>

    <div id="messages">
      <h3>ðŸ“¬ Notes for You</h3>
      <div id="noteList"></div>
    </div>
  </div>

  <script>
    // Firebase config
    const firebaseConfig = {
      apiKey: "AIzaSyD5-464mENvwNJR1WdZc10-mytrhvjzMBE",
      authDomain: "hehe-17447.firebaseapp.com",
      databaseURL: "https://hehe-17447-default-rtdb.firebaseio.com",
      projectId: "hehe-17447",
      storageBucket: "hehe-17447.appspot.com",
      messagingSenderId: "701145341818",
      appId: "1:701145341818:web:c820491ebef97388c780c3",
      measurementId: "G-20QC7HCBRQ"
    };

    const app = firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    let myName = "";
    let theirName = "";

    function startApp() {
      myName = document.getElementById("myName").value.trim();
      theirName = document.getElementById("theirName").value.trim();

      if (myName === "" || theirName === "") {
        alert("Please enter both names!");
        return;
      }

      document.getElementById("displayMyName").textContent = myName;
      document.getElementById("displayTheirName").textContent = theirName;

      document.getElementById("loginSection").style.display = "none";
      document.getElementById("chatSection").style.display = "block";

      listenForNotes();
    }

    function sendNote() {
      const text = document.getElementById("reminderText").value;
      if (text.trim() === "") return;

      db.ref(`sharedNotes/${theirName}`).push({
        from: myName,
        to: theirName,
        text: text,
        timestamp: Date.now()
      });

      document.getElementById("reminderText").value = "";
    }

    function listenForNotes() {
      const noteList = document.getElementById("noteList");
      noteList.innerHTML = "Loading...";

      const ref = db.ref(`sharedNotes/${myName}`);
      ref.off();

      ref.on("value", snapshot => {
        const data = snapshot.val();
        noteList.innerHTML = "";

        if (data) {
          Object.values(data).forEach(note => {
            const div = document.createElement("div");
            div.className = "note";
            div.innerText = `From ${note.from}: ${note.text}`;
            noteList.appendChild(div);
          });
        } else {
          noteList.innerHTML = "No notes yet!";
        }
      });
    }
  </script>

</body>
</html>
